{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
    <div class="post-detail">
        <h2>{{ post.title }}</h2>
        <p>by {{ post.author.sissy_name }} on {{ post.timestamp }}</p>
        <div class="post-content">{{ post.content }}</div>
        <hr>
        <h3>Comments</h3>
        <div class="list-group">
            {% for comment in post.comments.all %}
                <div class="list-group-item">
                    <h5>{{ comment.author.sissy_name }}</h5>
                    <p>{{ comment.content }}</p>
                    <small>{{ comment.timestamp }}</small>
                </div>
            {% endfor %}
        </div>
        {% if user.is_authenticated %}
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary">Add Comment</button>
            </form>
        {% else %}
            <p><a href="{% url 'login' %}">Log in</a> to add a comment.</p>
        {% endif %}
    </div>
{% endblock %}
